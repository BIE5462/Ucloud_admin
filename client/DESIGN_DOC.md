# äº‘ç”µè„‘å®¢æˆ·ç«¯ - æŠ€æœ¯è®¾è®¡æ–‡æ¡£

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
äº‘ç”µè„‘å®¢æˆ·ç«¯æ˜¯"äº‘ç”µè„‘å®¹å™¨ç®¡ç†ç³»ç»Ÿ"çš„ç»ˆç«¯ç”¨æˆ·åº”ç”¨ç¨‹åºï¼Œé‡‡ç”¨PySide6æ„å»ºè·¨å¹³å°GUIï¼Œä¸ºç”¨æˆ·æä¾›äº‘ç”µè„‘çš„ä¸€ç«™å¼ç®¡ç†æœåŠ¡ã€‚

### 1.2 åŠŸèƒ½èŒƒå›´
- ç”¨æˆ·ç™»å½•è®¤è¯
- äº‘ç”µè„‘ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ï¼‰
- ä¸€é”®RDPè¿œç¨‹æ¡Œé¢è¿æ¥ï¼ˆWindowsè‡ªåŠ¨è¿æ¥ï¼‰
- å®æ—¶è®¡è´¹æ˜¾ç¤ºä¸è´¦å•ç»Ÿè®¡
- è·¨å¹³å°æ”¯æŒï¼ˆWindows/macOS/Linuxï¼‰

### 1.3 æŠ€æœ¯æ ˆ
- **GUIæ¡†æ¶**: PySide6 (Qt for Python)
- **HTTPå®¢æˆ·ç«¯**: requests
- **é…ç½®ç®¡ç†**: JSON + ç¯å¢ƒå˜é‡
- **æ—¥å¿—ç³»ç»Ÿ**: Python logging
- **æ‰“åŒ…å·¥å…·**: PyInstaller

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ¨¡å—ç»“æ„

```
client/
â”œâ”€â”€ main.py                   # åº”ç”¨ç¨‹åºä¸»å…¥å£
â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†æ¨¡å—
â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ __init__.py          # APIæ¨¡å—å¯¼å‡º
â”‚   â””â”€â”€ client.py            # HTTP APIå®¢æˆ·ç«¯
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py          # å·¥å…·æ¨¡å—å¯¼å‡º
â”‚   â””â”€â”€ rdp_helper.py        # è¿œç¨‹æ¡Œé¢è¿æ¥å·¥å…·
â””â”€â”€ logs/                     # æ—¥å¿—è¾“å‡ºç›®å½•
```

### 2.2 æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           UI è¡¨ç°å±‚                  â”‚
â”‚   LoginDialog â†’ MainWindow          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ä¸šåŠ¡é€»è¾‘å±‚                 â”‚
â”‚   äº‘ç”µè„‘ç®¡ç† / çŠ¶æ€åˆ·æ–° / äº‹ä»¶å¤„ç†    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           API é€šä¿¡å±‚                 â”‚
â”‚   APIClient (RESTful APIè°ƒç”¨)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           å·¥å…·å±‚                     â”‚
â”‚   ConfigManager / RDPHelper         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 3.1 é…ç½®ç®¡ç†æ¨¡å— (config.py)

#### 3.1.1 AppConfig æ•°æ®ç±»

**é…ç½®é¡¹è¯´æ˜ï¼š**

| é…ç½®ç±»åˆ« | é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|--------|------|
| **API** | api_base_url | str | http://localhost:8000/api | APIåŸºç¡€åœ°å€ |
| | api_timeout | int | 30 | è¯·æ±‚è¶…æ—¶(ç§’) |
| | api_max_retries | int | 3 | æœ€å¤§é‡è¯•æ¬¡æ•° |
| | api_retry_delay | float | 1.0 | é‡è¯•é—´éš”(ç§’) |
| **RDP** | rdp_auto_connect | bool | True | è‡ªåŠ¨ç‚¹å‡»è¿æ¥æŒ‰é’® |
| | rdp_timeout | int | 30 | RDPè¿æ¥è¶…æ—¶ |
| | rdp_default_port | int | 3389 | é»˜è®¤RDPç«¯å£ |
| | rdp_username | str | Administrator | é»˜è®¤ç”¨æˆ·å |
| **UI** | window_width | int | 1000 | çª—å£å®½åº¦ |
| | window_height | int | 700 | çª—å£é«˜åº¦ |
| | auto_refresh_interval | int | 60 | è‡ªåŠ¨åˆ·æ–°é—´éš”(ç§’) |
| **Log** | log_level | str | INFO | æ—¥å¿—çº§åˆ« |
| | log_to_file | bool | True | æ˜¯å¦å†™å…¥æ–‡ä»¶ |
| | log_dir | str | logs | æ—¥å¿—ç›®å½• |

#### 3.1.2 é…ç½®åŠ è½½ä¼˜å…ˆçº§

```
ç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶ > ä»£ç é»˜è®¤å€¼
```

**é…ç½®æ–‡ä»¶è·¯å¾„ï¼š**
- Windows: `%APPDATA%\CloudPCClient\config.json`
- macOS/Linux: `~/.config/cloudpc-client/config.json`

#### 3.1.3 å…³é”®ä»£ç 

```python
class ConfigManager:
    """å•ä¾‹é…ç½®ç®¡ç†å™¨"""
    
    def load_config(self) -> AppConfig:
        # 1. ä»é»˜è®¤å€¼å¼€å§‹
        # 2. åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆJSONï¼‰
        # 3. ç¯å¢ƒå˜é‡è¦†ç›–
        pass
    
    def save_config(self) -> bool:
        # ä¿å­˜å½“å‰é…ç½®åˆ°JSONæ–‡ä»¶
        pass
```

---

### 3.2 APIå®¢æˆ·ç«¯æ¨¡å— (api/client.py)

#### 3.2.1 APIResult ç»Ÿä¸€è¿”å›ç»“æ„

```python
@dataclass
class APIResult:
    success: bool           # æ˜¯å¦æˆåŠŸ
    data: Any              # è¿”å›æ•°æ®
    message: str           # æç¤ºæ¶ˆæ¯
    code: int              # ä¸šåŠ¡çŠ¶æ€ç 
    request_id: str        # è¯·æ±‚è¿½è¸ªID
    error_type: str        # é”™è¯¯ç±»å‹
    error_detail: dict     # è¯¦ç»†é”™è¯¯ä¿¡æ¯
    traceback_info: str    # å¼‚å¸¸å †æ ˆ
```

**ä½¿ç”¨æ–¹å¼ï¼š**
```python
result = api_client.get_my_container()
if result.is_ok():
    data = result.data
else:
    error_msg = result.get_error_display()
```

#### 3.2.2 å¼‚å¸¸ä½“ç³»

```
APIError (åŸºç±»)
â”œâ”€â”€ NetworkError      # ç½‘ç»œè¿æ¥é”™è¯¯
â”œâ”€â”€ AuthenticationError # è®¤è¯å¤±è´¥ï¼ˆ401ï¼‰
â””â”€â”€ ServerError       # æœåŠ¡å™¨é”™è¯¯ï¼ˆ5xxï¼‰
```

#### 3.2.3 é‡è¯•æœºåˆ¶

```python
@retry_on_error(max_retries=3, delay=1.0)
def _request(self, method: str, endpoint: str, **kwargs):
    """
    è‡ªåŠ¨é‡è¯•è£…é¥°å™¨
    - ä»…å¯¹ç½‘ç»œé”™è¯¯è¿›è¡Œé‡è¯•
    - APIé”™è¯¯ä¸é‡è¯•
    """
```

#### 3.2.4 APIæ¥å£æ¸…å•

| æ¥å£åç§° | HTTPæ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½è¯´æ˜ |
|---------|---------|------|---------|
| **è®¤è¯æ¥å£** ||||
| login | POST | /auth/login | ç”¨æˆ·ç™»å½•ï¼ˆæ‰‹æœºå·+å¯†ç ï¼‰ |
| **äº‘ç”µè„‘æ¥å£** ||||
| get_my_container | GET | /container/my | è·å–å½“å‰ç”¨æˆ·çš„äº‘ç”µè„‘ |
| get_container_status | GET | /container/my/status | è·å–äº‘ç”µè„‘è¿è¡ŒçŠ¶æ€ |
| create_container | POST | /container | åˆ›å»ºäº‘ç”µè„‘ |
| start_container | POST | /container/start | å¯åŠ¨äº‘ç”µè„‘ |
| stop_container | POST | /container/stop | åœæ­¢äº‘ç”µè„‘ |
| delete_container | DELETE | /container | åˆ é™¤äº‘ç”µè„‘ |
| get_container_info | GET | /container/my/info | è·å–è¯¦ç»†è¿æ¥ä¿¡æ¯ |
| **è®¡è´¹æ¥å£** ||||
| get_billing_statistics | GET | /billing/statistics | è·å–æ¶ˆè´¹ç»Ÿè®¡ |
| get_billing_history | GET | /billing/history | è·å–æ¶ˆè´¹å†å²ï¼ˆåˆ†é¡µï¼‰ |
| get_current_session | GET | /billing/current-session | è·å–å½“å‰ä¼šè¯è®¡è´¹ |

---

### 3.3 RDPè¿æ¥å·¥å…· (utils/rdp_helper.py)

#### 3.3.1 RDPConnectionInfo æ•°æ®ç»“æ„

```python
@dataclass
class RDPConnectionInfo:
    host: str          # ä¸»æœºåœ°å€ (IPæˆ–IP:ç«¯å£)
    port: int = 3389   # RDPç«¯å£
    username: str = "Administrator"  # å›ºå®šç”¨æˆ·å
    password: str      # å¯†ç 
    uhost_id: str      # UHostå®ä¾‹ID
```

#### 3.3.2 æ ¸å¿ƒåŠŸèƒ½

**Windowsç³»ç»Ÿè‡ªåŠ¨è¿æ¥æµç¨‹ï¼š**

```
1. ä¿å­˜å‡­æ® â†’ Windowså‡­æ®ç®¡ç†å™¨ (cmdkey)
2. å¯åŠ¨mstsc â†’ è¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯
3. è‡ªåŠ¨ç‚¹å‡» â†’ Tabé”®èšç„¦ + Enteré”®ç¡®è®¤
4. ç›´æ¥ç™»å½• â†’ æ— éœ€æ‰‹åŠ¨è¾“å…¥å¯†ç 
```

**å…³é”®æ–¹æ³•ï¼š**

| æ–¹æ³• | åŠŸèƒ½ | å¹³å° |
|-----|------|------|
| `save_credentials()` | ä¿å­˜å‡­æ®åˆ°Windowså‡­æ®ç®¡ç†å™¨ | Windows |
| `auto_click_connect()` | æ¨¡æ‹ŸæŒ‰é”®è‡ªåŠ¨è¿æ¥ | Windows |
| `start_remote_desktop()` | å®Œæ•´çš„RDPè¿æ¥æµç¨‹ | Windows |
| `get_connection_instructions()` | ç”Ÿæˆæ‰‹åŠ¨è¿æ¥è¯´æ˜ | macOS/Linux |

#### 3.3.3 è·¨å¹³å°æ”¯æŒ

| æ“ä½œç³»ç»Ÿ | æ”¯æŒæ–¹å¼ |
|---------|---------|
| Windows | å…¨è‡ªåŠ¨è¿æ¥ï¼ˆmstsc + å‡­æ®ç®¡ç†ï¼‰ |
| macOS | æ˜¾ç¤ºè¿æ¥è¯´æ˜ï¼ˆMicrosoft Remote Desktopï¼‰ |
| Linux | æ˜¾ç¤ºè¿æ¥è¯´æ˜ï¼ˆxfreerdp / rdesktopï¼‰ |

---

### 3.4 ä¸»ç¨‹åºæ¨¡å— (main.py)

#### 3.4.1 UIç»„ä»¶å±‚æ¬¡

```
MainWindow (ä¸»çª—å£)
â”œâ”€â”€ é¡¶éƒ¨ä¿¡æ¯æ 
â”‚   â”œâ”€â”€ å…¬å¸åç§°
â”‚   â”œâ”€â”€ ä½™é¢æ˜¾ç¤º
â”‚   â””â”€â”€ é€€å‡ºç™»å½•æŒ‰é’®
â”œâ”€â”€ å†…å®¹åŒº (QStackedWidget)
â”‚   â”œâ”€â”€ é¡µé¢0: æ— äº‘ç”µè„‘
â”‚   â”‚   â””â”€â”€ åˆ›å»ºæŒ‰é’®
â”‚   â””â”€â”€ é¡µé¢1: äº‘ç”µè„‘è¯¦æƒ…
â”‚       â”œâ”€â”€ çŠ¶æ€å¡ç‰‡
â”‚       â”œâ”€â”€ è¿æ¥ä¿¡æ¯å¡ç‰‡
â”‚       â””â”€â”€ æ“ä½œæŒ‰é’®ç»„
â””â”€â”€ åº•éƒ¨å·¥å…·æ 
    â”œâ”€â”€ æŸ¥çœ‹è´¦å•
    â””â”€â”€ ä½¿ç”¨å¸®åŠ©
```

#### 3.4.2 æ ¸å¿ƒå¯¹è¯æ¡†

**LoginDialog** - ç™»å½•å¯¹è¯æ¡†
- æ‰‹æœºå·è¾“å…¥
- å¯†ç è¾“å…¥ï¼ˆå¯†ç æ¡†ï¼‰
- ç™»å½•æŒ‰é’® + å›è½¦é”®å¿«æ·ç™»å½•

**CreateContainerDialog** - åˆ›å»ºäº‘ç”µè„‘
- å›ºå®šé…ç½®å±•ç¤ºï¼ˆGPU/CPU/å†…å­˜/å­˜å‚¨ï¼‰
- å®ä¾‹åç§°è¾“å…¥
- ç¡®è®¤/å–æ¶ˆæŒ‰é’®

#### 3.4.3 ä¸šåŠ¡é€»è¾‘æµç¨‹

**ç™»å½•æµç¨‹ï¼š**
```
å¯åŠ¨åº”ç”¨ â†’ æ˜¾ç¤ºç™»å½•å¯¹è¯æ¡† â†’ è¾“å…¥è´¦å·å¯†ç  
â†’ è°ƒç”¨api_client.login() â†’ ä¿å­˜Token 
â†’ è¿›å…¥ä¸»çª—å£ â†’ åŠ è½½ç”¨æˆ·ä¿¡æ¯
```

**åˆ›å»ºäº‘ç”µè„‘æµç¨‹ï¼š**
```
ç‚¹å‡»åˆ›å»ºæŒ‰é’® â†’ æ˜¾ç¤ºåˆ›å»ºå¯¹è¯æ¡† â†’ è¾“å…¥åç§° 
â†’ api_client.create_container() â†’ åˆ›å»ºæˆåŠŸ 
â†’ åˆ·æ–°æ˜¾ç¤º â†’ åˆ‡æ¢åˆ°è¯¦æƒ…é¡µ
```

**å¯åŠ¨äº‘ç”µè„‘æµç¨‹ï¼š**
```
ç‚¹å‡»å¯åŠ¨æŒ‰é’® â†’ api_client.start_container() 
â†’ å¯åŠ¨æˆåŠŸ â†’ åˆ·æ–°çŠ¶æ€ â†’ æ˜¾ç¤ºè¿æ¥ä¿¡æ¯ 
â†’ å¯åŠ¨å®šæ—¶å™¨ï¼ˆ60ç§’åˆ·æ–°ï¼‰
```

**è¿æ¥è¿œç¨‹æ¡Œé¢æµç¨‹ï¼š**
```
ç‚¹å‡»è¿æ¥æŒ‰é’® â†’ ç¡®è®¤å¯¹è¯æ¡† â†’ æ£€æŸ¥Windowsç³»ç»Ÿ 
â†’ ä¿å­˜å‡­æ® â†’ å¯åŠ¨mstsc â†’ è‡ªåŠ¨ç‚¹å‡» 
â†’ è¿æ¥æˆåŠŸ
```

#### 3.4.4 çŠ¶æ€ç®¡ç†

**å®šæ—¶åˆ·æ–°æœºåˆ¶ï¼š**
```python
# ä½¿ç”¨QTimerå®ç°å®šæ—¶åˆ·æ–°
self.status_timer = QTimer()
self.status_timer.timeout.connect(self.update_status)

# å¯åŠ¨å®šæ—¶å™¨ï¼ˆäº‘ç”µè„‘è¿è¡Œæ—¶ï¼‰
self.status_timer.start(60 * 1000)  # 60ç§’

# åœæ­¢å®šæ—¶å™¨ï¼ˆäº‘ç”µè„‘åœæ­¢æ—¶ï¼‰
self.status_timer.stop()
```

**åˆ·æ–°å†…å®¹ï¼š**
- è¿è¡Œæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
- æœ¬æ¬¡æ¶ˆè´¹é‡‘é¢
- å‰©ä½™å¯ç”¨æ—¶é—´
- å½“å‰ä½™é¢
- è¿æ¥ä¿¡æ¯ï¼ˆIPã€ç«¯å£ã€å¯†ç ï¼‰

#### 3.4.5 æ“ä½œå†·å´æœºåˆ¶

é˜²æ­¢ç”¨æˆ·é¢‘ç¹æ“ä½œï¼ˆåœæ­¢/åˆ é™¤ï¼‰ï¼š

```python
# 20ç§’å†·å´æ—¶é—´
self.operation_cooldown = 20
self.last_operation_time = {"stop": 0.0, "delete": 0.0}

def check_operation_cooldown(self, operation):
    elapsed = time.time() - self.last_operation_time[operation]
    if elapsed < self.operation_cooldown:
        return False, remaining_seconds
    return True, 0
```

---

## 4. APIè¯¦ç»†è§„èŒƒ

### 4.1 è®¤è¯æ¥å£

#### 4.1.1 ç”¨æˆ·ç™»å½•

```
POST /api/auth/login
```

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "phone": "13800138000",
  "password": "123456"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": 1,
      "phone": "13800138000",
      "company_name": "æµ‹è¯•å…¬å¸",
      "balance": 100.00
    }
  }
}
```

---

### 4.2 äº‘ç”µè„‘æ¥å£

#### 4.2.1 è·å–æˆ‘çš„äº‘ç”µè„‘

```
GET /api/container/my
Authorization: Bearer <token>
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "data": {
    "has_container": true,
    "container": {
      "id": 1,
      "instance_name": "æˆ‘çš„äº‘ç”µè„‘",
      "status": "running",
      "gpu_type": "NVIDIA 3080Ti x 1",
      "cpu_cores": 12,
      "memory_gb": 32,
      "storage_gb": 200
    }
  }
}
```

#### 4.2.2 è·å–äº‘ç”µè„‘çŠ¶æ€

```
GET /api/container/my/status
Authorization: Bearer <token>
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "data": {
    "status": "running",
    "current_running_minutes": 45,
    "current_session_cost": 3.75,
    "balance": 96.25,
    "remaining_time_formatted": "çº¦19å°æ—¶",
    "connection_info": {
      "host": "192.168.1.100",
      "port": 3389,
      "username": "Administrator",
      "password": "AutoGenPass123",
      "uhost_id": "uhost-xxx"
    }
  }
}
```

#### 4.2.3 åˆ›å»ºäº‘ç”µè„‘

```
POST /api/container
Authorization: Bearer <token>
Content-Type: application/json

{
  "instance_name": "å¼€å‘ç¯å¢ƒ"
}
```

#### 4.2.4 å¯åŠ¨äº‘ç”µè„‘

```
POST /api/container/start
Authorization: Bearer <token>
```

#### 4.2.5 åœæ­¢äº‘ç”µè„‘

```
POST /api/container/stop
Authorization: Bearer <token>
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "message": "åœæ­¢æˆåŠŸ",
  "data": {
    "this_session": {
      "running_minutes": 45,
      "cost": 3.75
    }
  }
}
```

#### 4.2.6 åˆ é™¤äº‘ç”µè„‘

```
DELETE /api/container
Authorization: Bearer <token>
Content-Type: application/json

{
  "confirm": true,
  "reason": ""
}
```

---

### 4.3 è®¡è´¹æ¥å£

#### 4.3.1 è·å–æ¶ˆè´¹ç»Ÿè®¡

```
GET /api/billing/statistics
Authorization: Bearer <token>
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "data": {
    "balance": 96.25,
    "today_cost": 3.75,
    "this_month_cost": 15.50,
    "total_cost": 50.00,
    "total_running_minutes": 450
  }
}
```

#### 4.3.2 è·å–æ¶ˆè´¹å†å²

```
GET /api/billing/history?page=1&page_size=20
Authorization: Bearer <token>
```

---

## 5. å¼‚å¸¸å¤„ç†æœºåˆ¶

### 5.1 é”™è¯¯ç±»å‹æ˜ å°„

| HTTPçŠ¶æ€ç  | é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ |
|-----------|---------|---------|
| 401 | AuthenticationError | æç¤ºé‡æ–°ç™»å½• |
| 403 | APIError | æ˜¾ç¤ºæƒé™ä¸è¶³æç¤º |
| 404 | APIError | èµ„æºä¸å­˜åœ¨æç¤º |
| 422 | APIError | å‚æ•°æ ¡éªŒé”™è¯¯ |
| 500+ | ServerError | æœåŠ¡å™¨é”™è¯¯æç¤º |
| ç½‘ç»œå¼‚å¸¸ | NetworkError | è‡ªåŠ¨é‡è¯• |

### 5.2 ç”¨æˆ·æç¤ºç­–ç•¥

```python
# ç»Ÿä¸€é”™è¯¯å±•ç¤º
def show_api_error(result: APIResult):
    """æ˜¾ç¤ºAPIé”™è¯¯ä¿¡æ¯"""
    error_display = result.get_error_display()
    QMessageBox.critical(parent, "æ“ä½œå¤±è´¥", error_display)
```

---

## 6. æ•°æ®æµè½¬å›¾

### 6.1 ç™»å½•æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¾“å…¥   â”‚â”€â”€â”€â”€â†’â”‚  éªŒè¯è¯·æ±‚   â”‚â”€â”€â”€â”€â†’â”‚  ä¿å­˜Token  â”‚
â”‚ è´¦å·å¯†ç     â”‚     â”‚ /auth/login â”‚     â”‚ è¿›å…¥ä¸»çª—å£  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  è¿”å›ç»“æœ   â”‚
                    â”‚ APIResult   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 çŠ¶æ€åˆ·æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  QTimer     â”‚â”€â”€â”€â”€â†’â”‚ /container/ â”‚â”€â”€â”€â”€â†’â”‚ æ›´æ–°UIæ˜¾ç¤º  â”‚
â”‚ å®šæ—¶è§¦å‘    â”‚     â”‚ my/status   â”‚     â”‚ æ—¶é•¿/è´¹ç”¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                                       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    (å¾ªç¯åˆ·æ–°)
```

---

## 7. å¼€å‘è§„èŒƒ

### 7.1 ä»£ç é£æ ¼

- **ç¼©è¿›**: 4ç©ºæ ¼
- **å¼•å·**: åŒå¼•å·
- **å‘½åè§„èŒƒ**:
  - ç±»å: PascalCase (å¦‚ `APIClient`)
  - æ–¹æ³•/å˜é‡: snake_case (å¦‚ `get_container_status`)
  - å¸¸é‡: UPPER_SNAKE_CASE

### 7.2 UIè§„èŒƒ

- **ä¸»è‰²è°ƒ**: #409EFF (è“è‰²)
- **æˆåŠŸè‰²**: #67C23A (ç»¿è‰²)
- **è­¦å‘Šè‰²**: #E6A23C (é»„è‰²)
- **å±é™©è‰²**: #F56C6C (çº¢è‰²)
- **å­—ä½“**: Microsoft YaHei

### 7.3 æ—¥å¿—è§„èŒƒ

```python
logger = logging.getLogger(__name__)

logger.info("æ“ä½œæˆåŠŸä¿¡æ¯")
logger.warning("è­¦å‘Šä¿¡æ¯")
logger.error("é”™è¯¯ä¿¡æ¯", exc_info=True)  # åŒ…å«å¼‚å¸¸å †æ ˆ
```

---

## 8. éƒ¨ç½²è¯´æ˜

### 8.1 ä¾èµ–å®‰è£…

```bash
pip install -r requirements.txt
```

**requirements.txtå†…å®¹ï¼š**
```
PySide6>=6.4.0
requests>=2.28.0
```

### 8.2 è¿è¡Œæ–¹å¼

```bash
python main.py
```

### 8.3 æ‰“åŒ…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶

```bash
pyinstaller main.spec
```

---

## 9. æ›´æ–°æ—¥å¿—

### v1.2.0 (2024-02-13)
- âœ¨ æ–°å¢è¿æ¥ä¿¡æ¯ä¸€é”®å¤åˆ¶åŠŸèƒ½ï¼ˆåœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€UHost IDï¼‰
- âœ¨ ç™»å½•ç•Œé¢æ ‡ç­¾ä¼˜åŒ–ä¸º"æ‰‹æœºå·-è´¦å·"
- ğŸ”§ ä¿®å¤ RDP ç”¨æˆ·åå¤§å°å†™é—®é¢˜ï¼ˆç»Ÿä¸€ä¸º Administratorï¼‰
- ğŸ”§ æ•°å€¼å®‰å…¨å¤„ç†ï¼šè¿è¡Œæ—¶é•¿ã€æ¶ˆè´¹é‡‘é¢ç­‰ç»Ÿä¸€ä½¿ç”¨ max(0, value)
- ğŸ¨ è¿æ¥ä¿¡æ¯å¡ç‰‡å®½åº¦ä¼˜åŒ–ï¼ˆé™åˆ¶æœ€å¤§ 500pxï¼‰

### v1.1.0 (2024-02-09)
- âœ¨ æ–°å¢ä¸€é”®RDPè¿æ¥åŠŸèƒ½
- âœ¨ æ–°å¢é…ç½®ç®¡ç†ç³»ç»Ÿï¼ˆç¯å¢ƒå˜é‡+é…ç½®æ–‡ä»¶ï¼‰
- âœ¨ æ–°å¢APIè‡ªåŠ¨é‡è¯•æœºåˆ¶
- âœ¨ æ–°å¢æ—¥å¿—ç³»ç»Ÿï¼ˆæ–‡ä»¶+æ§åˆ¶å°ï¼‰
- âœ¨ æ”¯æŒè·¨å¹³å°è¿æ¥è¯´æ˜ï¼ˆmacOS/Linuxï¼‰
- â™»ï¸ é‡æ„ä»£ç ç»“æ„ï¼Œæ¨¡å—åŒ–è®¾è®¡
- ğŸ¨ ä¼˜åŒ–UIç•Œé¢å’Œäº¤äº’ä½“éªŒ

### v1.0.0 (2024-02-08)
- ğŸ‰ é¦–æ¬¡å‘å¸ƒ
- åŸºç¡€äº‘ç”µè„‘ç®¡ç†åŠŸèƒ½ï¼ˆåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ï¼‰
- ç”¨æˆ·ç™»å½•è®¤è¯
- å®æ—¶è®¡è´¹æ˜¾ç¤º

---

## 10. é™„å½•

### 10.1 çŠ¶æ€ç å¯¹ç…§è¡¨

| çŠ¶æ€ | è¯´æ˜ |
|-----|------|
| creating | åˆ›å»ºä¸­ |
| running | è¿è¡Œä¸­ |
| stopped | å·²åœæ­¢ |
| error | å¼‚å¸¸çŠ¶æ€ |

### 10.2 é…ç½®ç¤ºä¾‹

**config.json:**
```json
{
  "api": {
    "base_url": "http://localhost:8000/api",
    "timeout": 30,
    "max_retries": 3,
    "retry_delay": 1.0
  },
  "rdp": {
    "auto_connect": true,
    "timeout": 30,
    "default_port": 3389,
    "username": "Administrator"
  },
  "ui": {
    "window_width": 1000,
    "window_height": 700,
    "auto_refresh_interval": 60
  },
  "log": {
    "level": "INFO",
    "to_file": true,
    "dir": "logs"
  }
}
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.2  
**æœ€åæ›´æ–°**: 2024-02-13  
**ä½œè€…**: AIç¼–ç åŠ©æ‰‹
